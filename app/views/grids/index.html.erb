<div class="container">
  <% b = @song.grids.sort_by { |grid| grid[:location] } %>
  <div class="row">
    <% b.each do |grid| %>
      <%= link_to edit_song_grid_path(@song, grid) do %>
        <div class='grid col-lg-12'>
          <div class='grid-info'>
            <% if grid.location.present? %>
              <div class="list-group-item"><%= grid.location %></div>
            <% end %>
            <% if grid.type.present? %>
              <% case grid.type.id %>
                <% when 1 %>
                  <%= cl_image_tag("Single_vkhxvm.png", height:120, width: 180, crop: :fill, class: "grid") %>
                  <% if grid.musical_note.present? && grid.musical_scale.present? && grid.type.id == 1 %>
                    <div class="first-details"><%= grid.musical_note.name %> <%= grid.musical_scale.name %></div>
                  <% end %>
                <% when 2 %>
                  <%= cl_image_tag("couple_kcyrpk.png", height:120, width: 180, crop: :fill, class: "grid") %>
                  <% if grid.musical_note.present? && grid.musical_scale.present? && grid.second_musical_note.present? && grid.second_musical_scale.present? && grid.type.id == 2 %>
                    <div class="second-details"><%= grid.musical_note.name %> <%= grid.musical_scale.name %></div>
                    <div class="second-details-2"><%= grid.second_musical_note.name %> <%= grid.second_musical_scale.name %></div>
                  <% end %>
                <% when 3 %>
                  <%= cl_image_tag("single_then_couple_ul2tz3", height:120, width: 180, crop: :fill, class: "grid") %>
                  <% if grid.musical_note.present? && grid.musical_scale.present? && grid.second_musical_note.present? && grid.second_musical_scale.present? && grid.third_musical_note.present? && grid.third_musical_scale.present? && grid.type.id == 3 %>
                    <div class="third-details"><%= grid.musical_note.name %> <%= grid.musical_scale.name %></div>
                    <div class="third-details-2"><%= grid.second_musical_note.name %> <%= grid.second_musical_scale.name %></div>
                    <div class="third-details-3"><%= grid.third_musical_note.name %> <%= grid.third_musical_scale.name %></div>
                  <% end %>
                <% when 4 %>
                  <%= cl_image_tag("Couple_then_single_shu6zv.png", height:120, width: 180, crop: :fill, class: "grid") %>
                    <% if grid.musical_note.present? && grid.musical_scale.present? && grid.second_musical_note.present? && grid.second_musical_scale.present? && grid.third_musical_note.present? && grid.third_musical_scale.present? && grid.type.id == 4 %>
                    <div class="fourth-details"><%= grid.musical_note.name %> <%= grid.musical_scale.name %></div>
                    <div class="fourth-details-2"><%= grid.second_musical_note.name %> <%= grid.second_musical_scale.name %></div>
                    <div class="fourth-details-3"><%= grid.third_musical_note.name %> <%= grid.third_musical_scale.name %></div>
                  <% end %>
                <% else %>
                  <%= cl_image_tag("4_x5kbei.png", height:120, width: 180, crop: :fill, class: "grid") %>
                    <% if grid.musical_note.present? && grid.musical_scale.present? && grid.second_musical_note.present? && grid.second_musical_scale.present? && grid.third_musical_note.present? && grid.third_musical_scale.present? && grid.fourth_musical_note.present? && grid.fourth_musical_scale.present? && grid.type.id == 5 %>
                    <div class="fifth-details"><%= grid.musical_note.name %> <%= grid.musical_scale.name %></div>
                    <div class="fifth-details-2"><%= grid.second_musical_note.name %> <%= grid.second_musical_scale.name %></div>
                    <div class="fifth-details-3"><%= grid.third_musical_note.name %> <%= grid.third_musical_scale.name %></div>
                    <div class="fifth-details-4"><%= grid.fourth_musical_note.name %> <%= grid.fourth_musical_scale.name %></div>
                  <% end %>
              <% end %>
            <% end %>
            <% if grid.grid_location.present? %>
              <div class="list-group-item"><%= grid.grid_location %></div>
            <% end %>
          </div>
        </div>
      <% end %>
      <br>
    <% end %>
  </div>
</div>

<%= link_to 'song', song_path(@song) %>
